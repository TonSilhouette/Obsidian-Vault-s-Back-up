## ä¸€ã€`main.js`å…¥å£æ–‡ä»¶çš„å¯¼å…¥ä¸æŒ‚è½½æ–¹å¼ä¸åŒ

**vue2**ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **pototype (åŸå‹)**Â çš„å½¢å¼å»è¿›è¡Œæ“ä½œï¼Œå¼•å…¥çš„æ˜¯**æ„é€ å‡½æ•°**
- é»˜è®¤å¯¼å…¥`Vue`
- æœ‰ä¸¤ç§æŒ‚è½½æ–¹å¼ï¼š
	- å…ˆ`new Vue`å®ä¾‹åŒ–ä¸€ä¸ª`Vue`
		1. é€šè¿‡åœ¨è¿™ä¸ªå®ä¾‹ä¸­çš„`el`å±æ€§ç»™`'#app'`è¿›è¡ŒæŒ‚è½½
		2. æˆ–è€…åœ¨è¿™ä¸ªå®ä¾‹åé¢`.$mount('#app')`è¿›è¡ŒæŒ‚è½½

```js
import Vue from 'vue'
import App from './App'
import router from './router' 
import store from './store'

// æ–¹æ³•ä¸€ï¼šnew Vue
new Vue({
	el: '#app',
	router, 
	store,
	render: h => h(App)
})

// æ–¹æ³•äºŒï¼š$mount
new Vue({
	router, 
	store,
	render: (h) => h(App),
}).$mount('#app')
```



**vue3**ï¼švue3ä¸­éœ€è¦ä½¿ç”¨**ç»“æ„**çš„å½¢å¼è¿›è¡Œæ“ä½œï¼Œå¼•å…¥çš„æ˜¯**å·¥å‚å‡½æ•°**
- æŒ‰éœ€å¯¼å…¥`createApp`
- ç»™`createApp`å‡½æ•°ä¼ å…¥`App`ï¼Œå†`.mount('#app')`è¿›è¡ŒæŒ‚è½½

```js
import { createApp } from 'vue'
import App from './App.vue'
import router from './router' 
import store from './store'

const app = createApp(App)
app.use(store).use(router).mount('#app')
// æˆ–è€…æ›´åŠ ç®€æ´çš„å†™æ³•
app.use(store)
app.use(router)
app.mount('#app')
```

## äºŒã€é€‰é¡¹å¼API â†’ ç»„åˆå¼API

**vue2**ï¼šé€‰é¡¹å¼API ï¼ˆOptions APIï¼‰
- åœ¨vue2ä¸­åœ¨`data(){}`ä¸­å®šä¹‰æ•°æ®å˜é‡ ï¼Œåœ¨`methods:{}`ä¸­å®šä¹‰æ–¹æ³•


**vue3**ï¼šç»„åˆå¼API ï¼ˆComposition APIï¼‰
- ç»„åˆå¼ API æ˜¯ä¸€ç³»åˆ— API çš„é›†åˆï¼Œä½¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°è€Œä¸æ˜¯å£°æ˜é€‰é¡¹çš„æ–¹å¼å†™ Vue ç»„ä»¶
- `setup()`Â é’©å­æ˜¯åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆå¼ API çš„å…¥å£ï¼Œvue3çš„æ‰€æœ‰æ•°æ®ä¸æ–¹æ³•éƒ½å®šä¹‰åœ¨setup()æ–¹æ³•é‡Œï¼Œæœ€åæŠŠè¦ç”¨åˆ°çš„æ•°æ®å’Œå‡½æ•°éƒ½returnå‡ºå»
- `setup()`Â è‡ªèº«å¹¶æ²¡æœ‰å¯¹ç»„ä»¶å®ä¾‹çš„è®¿é—®æƒï¼Œå³åœ¨Â `setup()`Â ä¸­è®¿é—®Â `this`Â ä¼šæ˜¯Â `undefined`ã€‚ä½ å¯ä»¥åœ¨é€‰é¡¹å¼ API ä¸­è®¿é—®ç»„åˆå¼ API æš´éœ²çš„å€¼ï¼Œä½†åè¿‡æ¥åˆ™ä¸è¡Œ

```js
// ref å°±æ˜¯ä¸€ä¸ªç»„åˆå¼API  
import { ref } from 'vue';
export default {
  setup () {
    const show = ref(true)
    const toggle = () => {
      show.value = !show.value
    }
    // è®¡æ•°å™¨
    const count = ref(0)
    const increment = () => {
      count.value ++
    }
    // è¿”å›c
    return { show, toggle, count, increment }
  }
};
```


è¯­æ³•ç³–ï¼šsetupï¼Œå†™åœ¨`script`æ ‡ç­¾å†…
- å¯¹äºç»“åˆ #å•æ–‡ä»¶ç»„ä»¶ ä½¿ç”¨çš„ç»„åˆå¼ APIï¼Œæ¨èé€šè¿‡Â `<script setup>`
- çœç•¥`export default`å’Œ`return`
```vue
<script setup>
	import { ref } from 'vue';
	const show = ref(true)
	const toggle = () => {
		show.value = !show.value
	}
	// è®¡æ•°å™¨
	const count = ref(0)
	const increment = () => {
		count.value ++
	}
</script>
```

## ä¸‰ã€ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸åŒ

**Vue2 & Vue3**

| **Options API** | **Composition API**     |
|:--------------- |:----------------------- |
| beforeCreate    | ä¸éœ€è¦ï¼Œç›´æ¥æŠŠä»£ç å†™åœ¨setup()ä¸­ |
| created         | ä¸éœ€è¦ï¼Œç›´æ¥æŠŠä»£ç å†™åœ¨setup()ä¸­ |
| beforeMount     | onBeforeMount           |
| mounted         | onMounted               |
| beforeUpdate    | onBeforeUpdate          |
| updated         | onUpdated               |
| beforeDestroy   | onBeforeUnmountğŸ’¥       |
| destroyed       | onUnmountedğŸ’¥           |
| + activated     | onActivated             |
| + deactivated   | onDeactivated           |
| + errorCaptured | onErrorCaptured         |

- å–æ¶ˆäº†åˆ›å»ºé˜¶æ®µçš„ä¸¤ä¸ªé’©å­ï¼Œå› ä¸ºsetup()å‡½æ•°è§¦å‘æ—¶æœºä¸ºåˆšåˆ›å»ºæ—¶ï¼Œå¯ä»¥æ›¿ä»£
- é”€æ¯é˜¶æ®µé’©å­æ”¹åï¼šdestroy â†’ unmount
- å…¶ä»–çš„ç›´æ¥åŠ onï¼Œå°é©¼å³°


**Vue3æ–°å¢ç”Ÿå‘½å‘¨æœŸ**

| **ç”Ÿå‘½å‘¨æœŸé’©å­** | **è§¦å‘æ—¶æœº**                                                  |
|:---------------- |:------------------------------------------------------------- |
| onRenderTracked  | æ³¨å†Œä¸€ä¸ªè°ƒè¯•é’©å­ï¼Œå½“ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­è¿½è¸ªåˆ°å“åº”å¼ä¾èµ–æ—¶è°ƒç”¨;</br>è¿™ä¸ªé’©å­ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨ï¼Œä¸”åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸ä¼šè¢«è°ƒç”¨</br>  |
| onRenderTriggered| æ³¨å†Œä¸€ä¸ªè°ƒè¯•é’©å­ï¼Œå½“å“åº”å¼ä¾èµ–çš„å˜æ›´è§¦å‘äº†ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨;</br>è¿™ä¸ªé’©å­ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨ï¼Œä¸”åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸ä¼šè¢«è°ƒç”¨ |
| onServerPrefetch | æ³¨å†Œä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œåœ¨ç»„ä»¶å®ä¾‹åœ¨æœåŠ¡å™¨ä¸Šè¢«æ¸²æŸ“ä¹‹å‰è°ƒç”¨                   |

## å››ã€ç»„ä»¶é€šä¿¡æ–¹å¼ä¸åŒ

[[2. Vue3å•æ–‡ä»¶ç»„ä»¶çš„ä½¿ç”¨ä¸é€šä¿¡æ–¹å¼]]

## äº”ã€åŒå‘ç»‘å®šåŸç†ä¸åŒ

[[4. v-model çš„åŸç†]]
