## 什么是SPA
`SPA` (Single-page Application)，单页面应用，是一种网络应用程序或网站的模型，它通过动态重写当前页面来与用户交互，这种方法避免了页面之间切换打断用户体验。在单页应用中，所有必要的代码（`HTML`、`JavaScript`和`CSS`）都通过单个页面的加载而检索，或者根据需要（通常是为响应用户操作）动态装载适当的资源并添加到页面页面在任何时间点都不会重新加载，也不会将控制转移到其他页面。

SPA技术将产出html的逻辑从服务器转移到了客户端，在进入React，Vue等UI框架进行开发时，我们开发的页面更多的是在客户端进行脚本执行、数据请求和UI动态装载。

客户端渲染(CSR)允许单页面应用(SPA)能够在页面不刷新的前提下，进行页面信息的动态获取和展示。在页面初始阶段，浏览器只需接受页面**最基本的结构信息**(html)，其余的页面内容都是通过JS来获取或者展示。

当页面中的**部分**内容发生了变更，浏览器只需要向服务端发送用于获取该与该变更信息相关的AJAX。服务端在接收到指定的请求后，经过拼装处理，将浏览器想要的结果(通常是JSON的数据格式)返回。

常见的JS框架如`react` , `vue` , `angular` , `ember`都属于`SPA`


### 单页应用优缺点
优点：
- 具有桌面应用的即时性、网站的可移植性和可访问性
- 用户体验好、快，内容的改变不需要重新加载整个页面
- 良好的前后端分离，分工更明确

缺点：
- 不利于搜索引擎的抓取 -- [[In2. 你对SPA的理解？#解决方法|SEO优化]]
- 首次渲染速度较慢 -- [[In3. SPA首屏加载慢怎么解决？|原因以及解决方法]]

### 单页应用与多页应用的区别
|                 | 单页面应用（SPA）         | 多页面应用（MPA）                   |
|:--------------- |:------------------------- |:----------------------------------- |
| 组成            | 一个主页面和多个页面片段  | 多个主页面                          |
| 刷新方式        | 局部刷新                  | 整页刷新                            |
| url模式         | 哈希模式                  | 历史模式                            |
| SEO搜索引擎优化 | 难实现，可使用SSR方式改善 | 容易实现                            |
| 数据传递        | 容易                      | 通过url、cookie、localStorage等传递 |
| 页面切换        | 速度快，用户体验良好      | 切换加载资源，速度慢，用户体验差    |
| 维护成本        | 相对容易                  | 相对复杂                            |

### 如何给SPA做SEO
#### SEO是什么
`SEO` (Search Engine Optimization)，搜索引擎优化。是透过了解搜寻引擎的运作规则来调整网站，以提高目的网站在有关搜寻引擎内排名的方式。
#### 为什么SPA需要SEO
虽然，SPA能够很好的规避SSR渲染时数据更新需要刷新整个页面的弊端，但是由于SPA在页面初始阶段，只返回了页面的基础架构，后续页面内容都是通过JS动态获取的。这样**很不利于爬虫对网站后续内容的收录**。

#### 解决方法
1. **JS框架 + 服务端渲染(SSR)**
	可以使用一些JS框架(React/Vue)进行网站开发，并且将组件或页面转换为**静态HTML**，并存入指定的服务器。
	当客户端向服务端发起页面请求时，浏览器能获取一个**完整**的初始化结构，而不像CSR那样：只获取一个包含指定JS的HTML简易壳子。采用SSR渲染页面，当JS还在后台加载时，用户已经看到完整的页面信息了。
	在后续的操作中，应用又变成了客户端渲染，这样能够保证页面变更内容能更快的到达用户。
2. **静态化**
	目前主流的静态化主要有两种：
	（1）一种是通过程序将动态页面抓取并保存为静态页面，这样的页面的实际存在于服务器的硬盘中
	（2）另外一种是通过WEB服务器的 `URL Rewrite`的方式，它的原理是通过web服务器内部模块按一定规则将外部的URL请求转化为内部的文件地址，一句话来说就是把外部请求的静态地址转化为实际的动态页面地址，而静态页面实际是不存在的。
3. **使用`Phantomjs`针对爬虫处理**
	原理是通过`Nginx`配置，判断访问来源是否为爬虫，如果是则搜索引擎的爬虫请求会转发到一个`node server`，再通过`PhantomJS`来解析完整的`HTML`，返回给爬虫。
	[![piabwuD.png](https://s11.ax1x.com/2023/11/22/piabwuD.png)](https://imgse.com/i/piabwuD)